image: Visual Studio 2017

cache: 
  - .tmp
    
before_build:
  - ps: gitversion /l console /output buildserver
    
build_script:
  - ps: .\build.ps1 -configuration Release -target Compile
    
test_script:
  - ps: .\build.ps1 -configuration Release -target Test

for:
-
  branches:
    only:
      - master
      
  environment:
    NuGet: a2NMkYADRjkx04ZF09emp2hncwtVF6MfLvckIlXXVrHvySEduX/NfqVcmio4lI39
    
  after_test:
    - ps: .\build.ps1 -configuration Release -target Pack
    
  artifacts:
    - path: 'output\packages\*.nupkg'
  
